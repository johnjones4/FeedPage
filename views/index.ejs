<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>FeedPage</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <style text="text/css">
    header {
      margin-bottom: 1em; 
    }
    section {
      border: solid 1px #ccc;
      margin: 0 0 1em 0;
      padding: 1em 1em 0 1em;
    }
    h3 {
      font-size: 1.25em;
      margin: 0;
    }
    p {
      margin: 0;
    }
    article {
      margin: 0 0 1em 0;
    }
    a:visited {
      color: #999;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>My Feed</h1>
      <p class="text-muted">Last Updated: <%= lastUpdated ? lastUpdated.toLocaleString('en-US') : 'Never' %></p>
      <% if (lastError) { %>
        <div class="alert alert-danger" role="alert"><%= lastError %></div>
      <% } %>
    </header>
    <% feeds.forEach(feed => { %>
      <section>
          <h2><%= feed.title %></h2>
          <% feed.items.forEach(item => { %>
            <article>
              <h3><a href="<%= item.link %>" target="_blank"><%= item.title %></a></h3>
              <p>
                <%= item.subheads.join(' | ') %>
              </p>
            </article>
          <% }) %>
      </section>
    <% }) %>
  </div>
</body>
</html>
